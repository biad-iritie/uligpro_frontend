"use strict";(self.webpackChunkliga_soccer=self.webpackChunkliga_soccer||[]).push([[177],{27765:(e,n,r)=>{r.r(n),r.d(n,{default:()=>l});var t=r(25984),a=r(50018),s=r(27929);const l=()=>(0,s.jsx)(t.A,{title:"Sign Up",children:(0,s.jsx)(a.A,{})})},50018:(e,n,r)=>{r.d(n,{A:()=>S});var t=r(57528),a=r(20477),s=r(32430),l=r(96529),o=r(27565),i=r(51047),c=r(80982),d=r(3936),m=r(39442),u=r(23163),p=r.n(u),x=r(10723),f=r(27929);const h=e=>{let{open:n,onClose:r,onActivate:t}=e;const a=(0,x.d4)((e=>e.auth.status)),{register:s,handleSubmit:l,formState:{errors:o},reset:i}=(0,m.mN)();return(0,f.jsx)(c.default,{open:n,onClose:()=>{i(),r()},children:(0,f.jsxs)("div",{className:"d-flex flex-column g-20",children:[(0,f.jsxs)("div",{className:"d-flex flex-column g-10",children:[(0,f.jsx)("h2",{children:"Finaliser votre Inscription"}),(0,f.jsx)("p",{children:"Un code a \xe9t\xe9 envoy\xe9 \xe0 votre email, renseign\xe9 le ici."})]}),(0,f.jsxs)("div",{className:"d-flex flex-column g-16",children:[(0,f.jsxs)("form",{className:"d-flex g-10",onSubmit:l(((e,n)=>{n.preventDefault(),t(e)})),children:[(0,f.jsx)("input",{className:p()("field",{"field--error":o.email}),type:"text",placeholder:"Entrer le code",...s("code",{required:!0,minLength:3})}),"loading"===a?(0,f.jsx)(d.A,{color:"success",style:{margin:"auto"}}):(0,f.jsx)("button",{className:"btn",type:"submit",children:"Activer"})]}),(0,f.jsx)("p",{className:"text-12",children:"If you don't receive an email within a few minutes, please check your spam folder."})]})]})})};var g,v,j=r(89575),w=r(11030),C=r(57654),N=r(77265),b=r(19183);const y=(0,C.J1)(g||(g=(0,t.A)(["\n  mutation RegisterRegularUser(\n    $name: String!\n    $email: String!\n    $tel: String!\n    $password: String!\n  ) {\n    registerRegularUser(\n      UserInput: { name: $name, email: $email, tel: $tel, password: $password }\n    ) {\n      activationToken\n      error {\n        code\n        message\n      }\n    }\n  }\n"]))),k=(0,C.J1)(v||(v=(0,t.A)(["\n  mutation ActivateUser($activationCode: String!, $activationToken: String!) {\n    activateUser(\n      activationInput: {\n        activationCode: $activationCode\n        activationToken: $activationToken\n      }\n    ) {\n      user {\n        name\n        email\n        tel\n      }\n      accessToken\n      refreshToken\n      error {\n        code\n        message\n      }\n    }\n  }\n"]))),S=e=>{let{standalone:n=!0}=e;const[r,t]=(0,o.useState)(!1),[c]=(0,N.n)(y),[u]=(0,N.n)(k),g=(0,w.Zp)(),v=(0,x.wA)(),C=(0,x.d4)((e=>e.auth.activationToken)),S=(0,x.d4)((e=>e.auth.error)),A=(0,x.d4)((e=>e.auth.status)),$=(0,x.d4)((e=>e.events.ticketsDesired)),{register:I,handleSubmit:R,formState:{errors:T},control:U,watch:q}=(0,m.mN)({defaultValues:{name:"",numero:"",email:"",password:"",passwordConfirm:""}}),E=n?o.Fragment:l.A,F=n?{}:{className:"card card-padded"};return(0,o.useEffect)((()=>{console.log(C),"failed"===A&&""!==C&&i.oR.error(S),""!==C&&t(!0)}),[A,C]),(0,f.jsxs)(E,{...F,children:[(0,f.jsxs)("div",{className:"d-flex flex-column g-4",children:[(0,f.jsx)("h3",{children:"Creer votre compte"}),(0,f.jsx)("p",{className:"text-12",children:"Remplir le formulaire en dessous pour cr\xe9er un compte"})]}),(0,f.jsxs)("form",{onSubmit:R((async(e,n)=>{n.preventDefault();try{await v((0,b.CC)({getActivationTokenFunc:c,email:e.email,password:e.password,name:e.name,tel:e.numero})).unwrap()}catch(S){console.log(S)}})),children:[(0,f.jsxs)("div",{className:"d-flex flex-column g-20",style:{margin:"20px 0 30px"},children:[(0,f.jsx)("input",{className:p()("field",{"field--error":T.name}),type:"text",placeholder:"Entrer votre nom",...I("name",{required:!0})}),(0,f.jsx)(m.xI,{control:U,name:"numero",render:e=>{let{field:{ref:n,value:r,onChange:t}}=e;return(0,f.jsx)(j.K9,{required:!0,value:r,className:p()("field",{"field--error":T.phone}),onChange:e=>t(e.target.value),placeholder:"Entrer votre numero",format:"+225 ##########",mask:"_",getInputRef:n})}}),(0,f.jsx)("input",{className:p()("field",{"field--error":T.email}),type:"text",placeholder:"E-mail",...I("email",{required:!0,pattern:/^\S+@\S+$/i})}),(0,f.jsx)(m.xI,{control:U,name:"password",rules:{required:!0,minLength:8},render:e=>{let{field:{ref:n,onChange:r,value:t},fieldState:{error:a}}=e;return(0,f.jsx)(s.A,{className:p()("field",{"field--error":a}),value:t,onChange:e=>r(e.target.value),placeholder:"Entrer votre mot de passe (minimum 8 charact\xe8res)",innerRef:n})}}),T.password&&(0,f.jsx)("p",{role:"alert",children:"Mot de passe doit atteindre au minimum 8 charact\xe8res"}),(0,f.jsx)(m.xI,{control:U,name:"passwordConfirm",rules:{required:!0,validate:e=>e===q("password")},render:e=>{let{field:{ref:n,onChange:r,value:t},fieldState:{error:a}}=e;return(0,f.jsx)(s.A,{className:p()("field",{"field--error":a}),value:t,onChange:e=>r(e.target.value),placeholder:"Retaper votre mot de passe",innerRef:n})}})]}),"loading"===A?(0,f.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,f.jsx)(d.A,{color:"success",style:{margin:"auto"}})}):(0,f.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,f.jsx)("button",{type:"submit",className:"btn btn--sm",children:"Creer compte"}),(0,f.jsx)("button",{className:"text-button text-button--sm",children:(0,f.jsx)(a.k2,{"aria-label":"Inscription",to:"/login",children:"Connexion"})})]})]}),(0,f.jsx)(h,{open:r,onClose:()=>t(!1),onActivate:async(e,n)=>{try{await v((0,b.wQ)({activateUserFunc:u,activationCode:e.code,activationToken:C})).unwrap(),t(!1),Object.keys($).length>1?g("/payment"):g("/")}catch(S){console.log(S)}}})]})}}}]);
//# sourceMappingURL=177.fec5d431.chunk.js.map