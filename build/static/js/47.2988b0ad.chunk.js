"use strict";(self.webpackChunkuligpro=self.webpackChunkuligpro||[]).push([[47],{8411:(e,r,n)=>{n.d(r,{A:()=>c});var t=n(4549),s=n(1047),a=n(9442),o=n(3163),i=n.n(o),l=n(7929);const c=e=>{let{open:r,onClose:n}=e;const{register:o,handleSubmit:c,formState:{errors:d},reset:u}=(0,a.mN)(),m=()=>{u(),n()};return(0,l.jsx)(t.default,{open:r,onClose:m,children:(0,l.jsxs)("div",{className:"d-flex flex-column g-20",children:[(0,l.jsxs)("div",{className:"d-flex flex-column g-10",children:[(0,l.jsx)("h2",{children:"Reset Password"}),(0,l.jsx)("p",{children:"Enter your email address below and we'll send you a link to reset your password."})]}),(0,l.jsxs)("div",{className:"d-flex flex-column g-16",children:[(0,l.jsxs)("form",{className:"d-flex g-10",onSubmit:c((e=>{s.oR.info("New password was sent to ".concat(e.email)),m()})),children:[(0,l.jsx)("input",{className:i()("field",{"field--error":d.email}),type:"text",placeholder:"example@domain.com",...o("email",{required:!0,pattern:/^\S+@\S+$/i})}),(0,l.jsx)("button",{className:"btn",children:"Send"})]}),(0,l.jsx)("p",{className:"text-12",children:"If you don't receive an email within a few minutes, please check your spam folder."})]})]})})}},3466:(e,r,n)=>{n.r(r),n.d(r,{default:()=>b});var t,s=n(5984),a=n(7528),o=n(49),i=n(8411),l=n(477),c=n(3936),d=n(1047),u=n(9442),m=n(1030),f=n(7565),h=n(3163),x=n.n(h),p=n(9183),v=n(7654),g=n(2386),k=n(723),w=n(7929);const A=(0,v.J1)(t||(t=(0,a.A)(["\n  query Login($email: String!, $password: String!) {\n    login(userInput: { email: $email, password: $password }) {\n      user {\n        name\n        email\n        tel\n        role {\n          name\n        }\n      }\n\n      accessToken\n      refreshToken\n      error {\n        code\n        message\n      }\n    }\n  }\n"]))),y=()=>{const[e,r]=(0,f.useState)(!1),{register:n,handleSubmit:t,formState:{errors:s},control:a}=(0,u.mN)({defaultValues:{email:"",password:""}}),[h,{data:v,loading:y}]=(0,g._)(A),b=(0,m.Zp)(),j=(0,k.wA)(),S=(0,k.d4)((e=>e.auth.status)),N=(0,k.d4)((e=>e.auth.error)),C=(0,k.d4)((e=>e.events.ticketsDesired));(0,f.useEffect)((()=>{"failed"===S&&d.oR.error(N),"succeeded"===S&&(Object.keys(C).length>0?b("/payment"):b("/"))}),[j,S]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h1",{children:"Connexion"}),(0,w.jsxs)("form",{onSubmit:t((async(e,r)=>{r.preventDefault();try{await j((0,p.vp)({loginFunc:h,email:e.email,password:e.password})).unwrap()}catch(N){console.log(" Error",N)}})),children:[(0,w.jsxs)("div",{className:"d-flex flex-column g-10",style:{margin:"20px 0 30px"},children:[(0,w.jsxs)("div",{className:"d-flex flex-column g-20",children:[(0,w.jsx)("input",{className:x()("field",{"field--error":s.email}),type:"text",placeholder:"E-mail",...n("email",{required:!0,pattern:/^\S+@\S+$/i})}),(0,w.jsx)(u.xI,{control:a,name:"password",rules:{required:!0,minLength:8},render:e=>{let{field:{ref:r,onChange:n,value:t},fieldState:{error:s}}=e;return(0,w.jsx)(o.A,{className:x()("field",{"field--error":s}),value:t,onChange:e=>n(e.target.value),placeholder:"Mot de passe (minimum 8 charact\xe8res)",innerRef:r})}})]}),(0,w.jsx)("div",{className:"d-flex align-items-center g-10"})]}),"loading"===S?(0,w.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,w.jsx)(c.A,{color:"success",style:{margin:"auto"}})}):(0,w.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,w.jsx)("button",{className:"btn btn--sm",type:"submit",children:"Connexion"}),(0,w.jsx)(l.k2,{"aria-label":"Inscription",to:"/sign-up",children:(0,w.jsx)("button",{className:"text-button text-button--sm",children:(0,w.jsx)("label",{htmlFor:"rememberMe",children:"Inscrivez-vous"})})})]})]}),(0,w.jsx)(i.A,{open:e,onClose:()=>r(!1)})]})},b=()=>(0,w.jsx)(s.A,{title:"Login",children:(0,w.jsx)(y,{})})},2978:(e,r,n)=>{n.d(r,{x:()=>c});var t=n(7565),s=n(2328),a=n(3624),o=n(5062),i=n(7929);function l(e){return e.substring(2).toLowerCase()}function c(e){const{children:r,disableReactTree:n=!1,mouseEvent:c="onClick",onClickAway:d,touchEvent:u="onTouchEnd"}=e,m=t.useRef(!1),f=t.useRef(null),h=t.useRef(!1),x=t.useRef(!1);t.useEffect((()=>(setTimeout((()=>{h.current=!0}),0),()=>{h.current=!1})),[]);const p=(0,s.A)(r.ref,f),v=(0,a.A)((e=>{const r=x.current;x.current=!1;const t=(0,o.A)(f.current);if(!h.current||!f.current||"clientX"in e&&function(e,r){return r.documentElement.clientWidth<e.clientX||r.documentElement.clientHeight<e.clientY}(e,t))return;if(m.current)return void(m.current=!1);let s;s=e.composedPath?e.composedPath().indexOf(f.current)>-1:!t.documentElement.contains(e.target)||f.current.contains(e.target),s||!n&&r||d(e)})),g=e=>n=>{x.current=!0;const t=r.props[e];t&&t(n)},k={ref:p};return!1!==u&&(k[u]=g(u)),t.useEffect((()=>{if(!1!==u){const e=l(u),r=(0,o.A)(f.current),n=()=>{m.current=!0};return r.addEventListener(e,v),r.addEventListener("touchmove",n),()=>{r.removeEventListener(e,v),r.removeEventListener("touchmove",n)}}}),[v,u]),!1!==c&&(k[c]=g(c)),t.useEffect((()=>{if(!1!==c){const e=l(c),r=(0,o.A)(f.current);return r.addEventListener(e,v),()=>{r.removeEventListener(e,v)}}}),[v,c]),(0,i.jsx)(t.Fragment,{children:t.cloneElement(r,k)})}},3936:(e,r,n)=>{n.d(r,{A:()=>L});var t=n(7528),s=n(8587),a=n(8168),o=n(7565),i=n(1099),l=n(8788),c=n(4304),d=n(3637),u=n(4874),m=n(3725),f=n(1406),h=n(6129);function x(e){return(0,h.Ay)("MuiCircularProgress",e)}(0,f.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var p,v,g,k,w=n(7929);const A=["className","color","disableShrink","size","style","thickness","value","variant"];let y,b,j,S;const N=44,C=(0,c.i7)(y||(y=p||(p=(0,t.A)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),E=(0,c.i7)(b||(b=v||(v=(0,t.A)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),R=(0,m.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.root,r[n.variant],r["color".concat((0,d.A)(n.color))]]}})((e=>{let{ownerState:r,theme:n}=e;return(0,a.A)({display:"inline-block"},"determinate"===r.variant&&{transition:n.transitions.create("transform")},"inherit"!==r.color&&{color:(n.vars||n).palette[r.color].main})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&(0,c.AH)(j||(j=g||(g=(0,t.A)(["\n      animation: "," 1.4s linear infinite;\n    "]))),C)})),P=(0,m.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),D=(0,m.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.circle,r["circle".concat((0,d.A)(n.variant))],n.disableShrink&&r.circleDisableShrink]}})((e=>{let{ownerState:r,theme:n}=e;return(0,a.A)({stroke:"currentColor"},"determinate"===r.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===r.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&!r.disableShrink&&(0,c.AH)(S||(S=k||(k=(0,t.A)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),E)})),L=o.forwardRef((function(e,r){const n=(0,u.A)({props:e,name:"MuiCircularProgress"}),{className:t,color:o="primary",disableShrink:c=!1,size:m=40,style:f,thickness:h=3.6,value:p=0,variant:v="indeterminate"}=n,g=(0,s.A)(n,A),k=(0,a.A)({},n,{color:o,disableShrink:c,size:m,thickness:h,value:p,variant:v}),y=(e=>{const{classes:r,variant:n,color:t,disableShrink:s}=e,a={root:["root",n,"color".concat((0,d.A)(t))],svg:["svg"],circle:["circle","circle".concat((0,d.A)(n)),s&&"circleDisableShrink"]};return(0,l.A)(a,x,r)})(k),b={},j={},S={};if("determinate"===v){const e=2*Math.PI*((N-h)/2);b.strokeDasharray=e.toFixed(3),S["aria-valuenow"]=Math.round(p),b.strokeDashoffset="".concat(((100-p)/100*e).toFixed(3),"px"),j.transform="rotate(-90deg)"}return(0,w.jsx)(R,(0,a.A)({className:(0,i.A)(y.root,t),style:(0,a.A)({width:m,height:m},j,f),ownerState:k,ref:r,role:"progressbar"},S,g,{children:(0,w.jsx)(P,{className:y.svg,ownerState:k,viewBox:"".concat(22," ").concat(22," ").concat(N," ").concat(N),children:(0,w.jsx)(D,{className:y.circle,style:b,ownerState:k,cx:N,cy:N,r:(N-h)/2,fill:"none",strokeWidth:h})})}))}))}}]);
//# sourceMappingURL=47.2988b0ad.chunk.js.map