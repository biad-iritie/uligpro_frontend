"use strict";(self.webpackChunkuligpro=self.webpackChunkuligpro||[]).push([[192],{166:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var n=r(7565),a=r(2643),i=r(9163),o=r(7528);const s={card:"styles_card__vmIgG",container:"styles_container__w5464",wrapper:"styles_wrapper__USPiG",title:"styles_title__rUpHw",img:"styles_img__6R0-i",button:"styles_button__kFxMi"};var c,l,d=r(6529),u=r(1047),h=r(5444),m=r(3936),v=r(5493),p=r(9736),g=r(723),f=r(7654),x=r(7265),k=r(1030),y=r(7929);const b=(0,f.J1)(c||(c=(0,o.A)(["\n  mutation BuyTickets($tickets: [buyTicketsEventInput!]!) {\n    buyTickets(tickets: $tickets) {\n      code\n      payment_url\n      payment_token\n      payment_id\n      error {\n        code\n        message\n      }\n    }\n  }\n"]))),w=(0,f.J1)(l||(l=(0,o.A)(["\n  mutation ActionAfterPayment($idTransaction: String!) {\n    actionAfterPayment(idTransaction: $idTransaction) {\n      message\n    }\n  }\n"]))),A=()=>{const[e,{height:t}]=(0,v.A)(),[r,{width:a}]=(0,v.A)(),i=(0,k.Zp)(),o=(0,g.d4)((e=>e.events.ticketsDesired)),c=(0,g.d4)((e=>e.events.eventSelected)),[l,f]=(0,n.useState)([]),[A,_]=(0,n.useState)(0),j=((0,g.d4)((e=>e.events.error)),(0,g.d4)((e=>e.events.status.buyTicket))),S=(0,g.d4)((e=>e.events.paymentUrl)),C=(0,g.d4)((e=>e.events.payment_id)),[N,{data:M,loading:I}]=(0,x.n)(b),T=(0,g.wA)(),[F]=((0,g.d4)((e=>e.events.message)),(0,x.n)(w));return(0,n.useEffect)((()=>{if(0===l.length&&Object.keys(o).length>0){let e=[],t=0;Object.entries(o).forEach((r=>{let[n,a]=r;e.push(a),t+=a.quantity*a.price})),_(t),f(e)}""!==S&&"succeeded"===j&&(window.open(S,"_blank","rel=noopener noreferrer"),setTimeout((async()=>{try{await T((0,p.rm)({actionAfterPaymentFunc:F,idTransaction:C})).unwrap()}catch(e){u.oR.error(e.message)}}),12e4),T((0,p.DW)())),0===Object.keys(o).length&&i("/")}),[o,j,S]),(0,y.jsxs)(d.A,{className:"".concat(s.card," card card-padded"),children:[(0,y.jsx)("h3",{className:s.title,children:"Recapitulatif"}),(0,y.jsx)("div",{className:"track d-flex flex-column flex-1",children:l.length>0?l.map(((e,t)=>{const n=e.name,i="".concat(e.price," FCFA"),o=e.quantity,c="".concat(e.price*e.quantity," FCFA");return(0,y.jsxs)("div",{style:{paddingBottom:"10px"},className:"".concat(s.item," d-flex align-items-center justify-content-between g-20"),children:[(0,y.jsx)("div",{className:"d-flex align-items-center flex-1 g-10",children:(0,y.jsxs)("div",{className:"d-flex flex-column flex-1",ref:r,children:[(0,y.jsx)(h.A,{className:"h4",text:n,width:a,lines:1}),(0,y.jsx)("span",{className:"label label--store h5",children:"".concat(i," x ").concat(o)})]})}),(0,y.jsx)("h3",{className:"text-highlight",children:c})]},t)})):(0,y.jsx)(y.Fragment,{})}),(0,y.jsx)("div",{className:"card-padded d-flex flex-column g-20",ref:e,children:(0,y.jsxs)("p",{className:"d-flex justify-content-between h3",children:["Total: ",(0,y.jsx)("span",{children:"".concat(A," FCFA")})]})}),(0,y.jsx)("div",{className:s.footer,children:"loading"===j?(0,y.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,y.jsx)(m.A,{color:"success",style:{margin:"auto"}})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("button",{disabled:0===l.length,className:"btn w-100",onClick:()=>{(async()=>{let e=[];Object.entries(o).forEach((t=>{let[r,n]=t;e.push({eventId:c.id,ticket_categoryId:r,quantity:n.quantity})}));try{await T((0,p.Gq)({buyTicketsFunc:N,tickets:e})).unwrap()}catch(t){console.log(" Error",t),u.oR.error(t.message)}})()},children:"Proceder au paiement"})})})]})};r(4556),r(5586),r(3163),r(4653);var _;(0,f.J1)(_||(_=(0,o.A)(["\n  mutation BuyTickets(\n    $tickets: [buyTicketsEventInput!]!\n    $transaction: TransactionInput!\n  ) {\n    buyTickets(tickets: $tickets, transaction: $transaction) {\n      message\n    }\n  }\n"])));const j={recap:(0,y.jsx)(A,{})},S=()=>{(0,g.d4)((e=>e.events.ticketsDesired)),(0,k.Zp)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.A,{title:"Paiement"}),(0,y.jsx)(a.A,{id:"buying_ticket",widgets:j})]})}},5586:(e,t,r)=>{var n,a=r(7528),i=r(1427),o=r(1998),s=r.n(o),c=r(8154);const l=(0,i.i7)(n||(n=(0,a.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),d=(0,i.Ay)(c.Ay).withConfig({componentId:"sc-3priga-0"})([".select{&__control{cursor:pointer;transition:var(--transition);border:none;min-height:unset;border-radius:4px;box-shadow:none;&--is-focused,&:hover{outline:none;}&--is-focused .icon{transform:rotate(180deg);}.icon{transition:.3s ease-in-out;}}&__single-value{overflow:visible;}&__menu{min-width:max-content;width:100%;border-radius:12px;z-index:100;animation:"," var(--transition);&.close{animation:"," var(--transition) reverse;}&-list{max-height:160px;overflow-y:auto;scroll-behavior:smooth;z-index:100;}}&__option{cursor:pointer;transition:var(--transition);&:hover,&--is-focused,&--is-selected{background:transparent;color:var(--header);}}&__indicator,&__indicator-separator{display:none;}&__value-container{padding:0;}}"],l,l);(0,i.Ay)(d).withConfig({componentId:"sc-3priga-1"})([".select{&__control{background-color:transparent;border:1px solid var(--border);padding:0 12px;height:40px;&--is-focused,&:hover{border-color:var(--highlight);}}&__placeholder{color:var(--placeholder);}&__single-value{color:var(--text);line-height:1;}&__menu{box-shadow:var(--widget-shadow);background:var(--widget);border:",";width:100%;}}"],s()("theme",{light:"1px solid var(--widget)",dark:"1px solid var(--border)"}));r(7565),r(7929)},4556:(e,t,r)=>{var n=r(1427),a=r(1998),i=r.n(a);r(7477),r(3163),r(7929);n.Ay.button.withConfig({componentId:"sc-msowhl-0"})(["border-radius:0;position:relative;background:",";&.active,&[aria-selected='true'],&:hover,&:focus{background:",";box-shadow:",";}.title{position:relative;z-index:2;}.color{position:absolute;z-index:1;height:100%;width:4px;top:0;transition:width var(--transition);}&:first-of-type .color{&.ltr{left:0;}&.rtl{right:0;}}&:last-of-type .color{transform:scaleX(-1);&.ltr{right:0;}&.rtl{left:0;}}&[data-colored='true']{&.active,&[aria-selected='true'],&:hover,&:focus{background:var(--widget) !important;box-shadow:none;.color{width:100%;}&.dark-bg{color:#fff;}}}"],i()("theme",{light:"var(--body)",dark:"var(--border)"}),i()("theme",{light:"var(--widget) !important",dark:"var(--accent) !important"}),i()("theme",{light:"0 1px 8px rgba(110, 110, 110, 0.1);",dark:"none"}))},3936:(e,t,r)=>{r.d(t,{A:()=>F});var n=r(7528),a=r(8587),i=r(8168),o=r(7565),s=r(1099),c=r(8788),l=r(4304),d=r(3637),u=r(4874),h=r(3725),m=r(1406),v=r(6129);function p(e){return(0,v.Ay)("MuiCircularProgress",e)}(0,m.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var g,f,x,k,y=r(7929);const b=["className","color","disableShrink","size","style","thickness","value","variant"];let w,A,_,j;const S=44,C=(0,l.i7)(w||(w=g||(g=(0,n.A)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),N=(0,l.i7)(A||(A=f||(f=(0,n.A)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),M=(0,h.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t["color".concat((0,d.A)(r.color))]]}})((e=>{let{ownerState:t,theme:r}=e;return(0,i.A)({display:"inline-block"},"determinate"===t.variant&&{transition:r.transitions.create("transform")},"inherit"!==t.color&&{color:(r.vars||r).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&(0,l.AH)(_||(_=x||(x=(0,n.A)(["\n      animation: "," 1.4s linear infinite;\n    "]))),C)})),I=(0,h.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),T=(0,h.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t["circle".concat((0,d.A)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:r}=e;return(0,i.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&(0,l.AH)(j||(j=k||(k=(0,n.A)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),N)})),F=o.forwardRef((function(e,t){const r=(0,u.A)({props:e,name:"MuiCircularProgress"}),{className:n,color:o="primary",disableShrink:l=!1,size:h=40,style:m,thickness:v=3.6,value:g=0,variant:f="indeterminate"}=r,x=(0,a.A)(r,b),k=(0,i.A)({},r,{color:o,disableShrink:l,size:h,thickness:v,value:g,variant:f}),w=(e=>{const{classes:t,variant:r,color:n,disableShrink:a}=e,i={root:["root",r,"color".concat((0,d.A)(n))],svg:["svg"],circle:["circle","circle".concat((0,d.A)(r)),a&&"circleDisableShrink"]};return(0,c.A)(i,p,t)})(k),A={},_={},j={};if("determinate"===f){const e=2*Math.PI*((S-v)/2);A.strokeDasharray=e.toFixed(3),j["aria-valuenow"]=Math.round(g),A.strokeDashoffset="".concat(((100-g)/100*e).toFixed(3),"px"),_.transform="rotate(-90deg)"}return(0,y.jsx)(M,(0,i.A)({className:(0,s.A)(w.root,n),style:(0,i.A)({width:h,height:h},_,m),ownerState:k,ref:t,role:"progressbar"},j,x,{children:(0,y.jsx)(I,{className:w.svg,ownerState:k,viewBox:"".concat(22," ").concat(22," ").concat(S," ").concat(S),children:(0,y.jsx)(T,{className:w.circle,style:A,ownerState:k,cx:S,cy:S,r:(S-v)/2,fill:"none",strokeWidth:v})})}))}))},7265:(e,t,r)=>{r.d(t,{n:()=>d});var n=r(958),a=r(6366),i=r(1245),o=r(7294),s=r(7388),c=r(4928),l=r(3422);function d(e,t){var r=(0,l.m)(null===t||void 0===t?void 0:t.client);(0,s.D$)(e,s.KG.Mutation);var d=a.useState({called:!1,loading:!1,client:r}),u=d[0],h=d[1],m=a.useRef({result:u,mutationId:0,isMounted:!0,client:r,mutation:e,options:t});Object.assign(m.current,{client:r,options:t,mutation:e});var v=a.useCallback((function(e){void 0===e&&(e={});var t=m.current,r=t.options,a=t.mutation,s=(0,n.Cl)((0,n.Cl)({},r),{mutation:a}),l=e.client||m.current.client;m.current.result.loading||s.ignoreResults||!m.current.isMounted||h(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:l});var d=++m.current.mutationId,u=(0,i.l)(s,e);return l.mutate(u).then((function(t){var r,n,a=t.data,i=t.errors,s=i&&i.length>0?new c.K4({graphQLErrors:i}):void 0,v=e.onError||(null===(r=m.current.options)||void 0===r?void 0:r.onError);if(s&&v&&v(s,u),d===m.current.mutationId&&!u.ignoreResults){var p={called:!0,loading:!1,data:a,error:s,client:l};m.current.isMounted&&!(0,o.L)(m.current.result,p)&&h(m.current.result=p)}var g=e.onCompleted||(null===(n=m.current.options)||void 0===n?void 0:n.onCompleted);return s||null===g||void 0===g||g(t.data,u),t})).catch((function(t){var r;if(d===m.current.mutationId&&m.current.isMounted){var n={loading:!1,error:t,data:void 0,called:!0,client:l};(0,o.L)(m.current.result,n)||h(m.current.result=n)}var a=e.onError||(null===(r=m.current.options)||void 0===r?void 0:r.onError);if(a)return a(t,u),{data:void 0,errors:t};throw t}))}),[]),p=a.useCallback((function(){if(m.current.isMounted){var e={called:!1,loading:!1,client:r};Object.assign(m.current,{mutationId:0,result:e}),h(e)}}),[]);return a.useEffect((function(){return m.current.isMounted=!0,function(){m.current.isMounted=!1}}),[]),[v,(0,n.Cl)({reset:p},u)]}}}]);
//# sourceMappingURL=192.01a12ac7.chunk.js.map