"use strict";(self.webpackChunkuligpro=self.webpackChunkuligpro||[]).push([[870],{2264:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(9163),i=r(2643),a=r(7528),o=r(2614);r(3044),r(8466),r(3546);var s=r(7929);var l=r(6529),c=(r(5010),r(5556),r(3936)),d=r(7477),g=(r(6247),r(9607),r(7565)),u=r(7654),h=r(7265),v=r(723);const x=r.p+"static/media/qr-frame.e2e2f64139f92332d7c1e2b5c8b4ae84.svg";var p,f=r(1047),b=r(9736);const m=(0,u.J1)(p||(p=(0,a.A)(["\n  mutation GetTicketScanned($code: String!) {\n    getTicketScanned(code: $code) {\n      status\n      error {\n        code\n        message\n      }\n    }\n  }\n"]))),w=()=>{const{theme:e}=(0,d.q)(),[t,{data:r,loading:n}]=(0,h.n)(m),i=(0,g.useRef)(HTMLVideoElement),a=(0,g.useRef)(HTMLDivElement);let u=(0,g.useRef)(o.A);const[p,w]=(0,g.useState)(!0),[k,j]=(0,g.useState)(!1),A=(0,v.d4)((e=>e.events.status.ticket)),F=(0,v.d4)((e=>e.events.error)),y=(0,v.d4)((e=>e.events.message)),[C,N]=(0,g.useState)("No result"),S=(0,v.wA)(),R=async e=>{var r;console.log(e),null===u||void 0===u||null===(r=u.current)||void 0===r||r.stop(),j(!0);try{await S((0,b.ct)({scanTicketsFunc:t,code:e.data})).unwarp()}catch(F){console.log(F)}},q=e=>{console.log(e)};return(0,g.useEffect)((()=>(null!==i&&void 0!==i&&i.current&&(u.current=new o.A(null===i||void 0===i?void 0:i.current,R,{onDecodeError:q,preferredCamera:"environment",highlightScanRegion:!0,highlightCodeOutline:!0,overlay:(null===a||void 0===a?void 0:a.current)||void 0})),()=>{var e;null!==i&&void 0!==i&&i.current||(null===u||void 0===u||null===(e=u.current)||void 0===e||e.stop())})),[]),(0,g.useEffect)((()=>{p||alert("Camera is blocked or not accessible. Please allow camera in your browser permissions and Reload."),"failed"===A&&f.oR.error(F),"succeeded"===A&&k&&(""!==y?f.oR.success(y):f.oR.error(F),j(!1))}),[p,A]),(0,s.jsxs)(l.A,{className:"card",children:[(0,s.jsxs)("div",{className:"qr-reader",children:[(0,s.jsx)("div",{ref:a,className:"qr-box",children:(0,s.jsx)("img",{src:x,alt:"Qr Frame",width:256,height:256,className:"qr-frame"})}),(0,s.jsx)("video",{ref:i})]}),(0,s.jsx)("div",{style:{marginLeft:"41%",marginTop:"25%",position:"absolute",top:0,left:0,zIndex:99999},children:"loading"===A&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.A,{color:"success"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"d-flex flex-column g-12 card-padded"}),(0,s.jsx)("button",{className:"btn w-100",onClick:()=>{(()=>{var e;null===u||void 0===u||null===(e=u.current)||void 0===e||e.start().then((()=>w(!0))).catch((e=>{console.log(e),e&&w(!1)}))})()},children:"Scanner"})]})]})},k={ticket:(0,s.jsx)(w,{})},j=()=>((0,v.wA)(b.W3),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{title:"Scanner Tickets"}),(0,s.jsx)(i.A,{id:"scanticket",widgets:k})]}))},1643:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(1427),i=r(1998),a=r.n(i),o=r(3163),s=r.n(o),l=r(7929);const c=n.Ay.button.withConfig({componentId:"sc-85p36v-0"})(["height:40px;border-radius:8px;padding:0 14px;transition:all var(--transition);line-height:1;border:1px solid var(--border);&.list{color:",";background-color:",";&:hover,&:focus,&.active{",";}}&.group{color:",";background-color:var(--widget);&:hover,&:focus,&.active{",";}}"],a()("theme",{light:"var(--highlight)",dark:"var(--text)"}),a()("theme",{light:"var(--widget)",dark:"var(--border)"}),a()("theme",{light:"\n            filter: drop-shadow(0px 1px 8px rgba(110, 110, 110, 0.1));\n            border-color: var(--widget);\n        ",dark:"\n            background-color: var(--widget);\n            border-color: var(--widget);\n            box-shadow: 0 1px 8px rgba(33, 33, 33, 0.1);\n            color: var(--accent);\n        "}),a()("theme",{light:"var(--olive)",dark:"var(--accent)"}),a()("theme",{light:"\n            filter: drop-shadow(0px 1px 8px rgba(110, 110, 110, 0.1));\n            border-color: var(--widget);\n        ",dark:"\n            background-color: var(--border);\n        "})),d=e=>{let{text:t,onClick:r,active:n,type:i="list"}=e;return(0,l.jsx)(c,{className:s()("".concat(i," h4"),{active:n}),onClick:r,children:t})}},5556:(e,t,r)=>{r.d(t,{A:()=>f});var n,i,a=r(7528),o=r(1427),s=r(1998),l=r.n(s),c=r(1643),d=r(7619),g=r(7565),u=r(7477),h=r(7929);const v=(0,o.AH)(n||(n=(0,a.A)(["\n  padding-left: 10px;\n  background: ",";\n  border-radius: 4px 0 0 0;\n"])),l()("theme",{light:"linear-gradient(90deg, #FFFFFF 28.49%, rgba(255, 255, 255, 0.0001) 100%);",dark:"linear-gradient(-90deg, rgba(17, 19, 18, 0.0001) 0%, #111312 77.09%);"})),x=(0,o.AH)(i||(i=(0,a.A)(["\n  padding-right: 10px;\n  background: ",";\n  border-radius: 0 4px 0 0;\n"])),l()("theme",{light:"linear-gradient(-90deg, #FFFFFF 28.49%, rgba(255, 255, 255, 0.0001) 100%);",dark:"linear-gradient(90deg, rgba(17, 19, 18, 0.0001) 0%, #111312 77.09%);"})),p=o.Ay.div.withConfig({componentId:"sc-8wxrif-0"})(["display:flex;gap:20px;box-shadow:0 1px 8px rgba(110,110,110,0.1);background:",";position:relative;.swiper{padding:20px 0;}.swiper-slide{width:fit-content;}.nav{display:flex;align-items:center;justify-content:space-between;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;button{width:50px;height:100%;display:flex;align-items:center;color:#8ea2ab;}&.ltr button{&:first-child{",";justify-content:flex-start;}&:last-child{",";justify-content:flex-end;}}&.rtl button{&:first-child{",";justify-content:flex-start;}&:last-child{",";justify-content:flex-end;}}}"],l()("theme",{light:"var(--widget)",dark:"#1B1F23"}),v,x,x,v),f=e=>{let{active:t,setActive:r,options:n,innerRef:i}=e;const[a,o]=(0,g.useState)(null),{direction:s}=(0,u.q)();return(0,g.useEffect)((()=>{a&&(a.changeLanguageDirection(s),a.update())}),[a,s]),(0,h.jsxs)(p,{ref:i,children:[(0,h.jsxs)("div",{className:"nav ".concat(s),children:[(0,h.jsx)("button",{"aria-label":"Previous",onClick:()=>{a.slidePrev(),r(n[a.realIndex]||n[a.realIndex])},children:(0,h.jsx)("i",{className:"icon icon-chevron-left"})}),(0,h.jsx)("button",{"aria-label":"Next",onClick:()=>{a.slideNext(),r(n[a.realIndex]||n[a.realIndex])},children:(0,h.jsx)("i",{className:"icon icon-chevron-right"})})]}),(0,h.jsx)(d.RC,{className:"selection-list w-100 h-100",onSwiper:o,slidesPerView:"auto",spaceBetween:12,loop:!0,centeredSlides:!0,children:n.map(((e,n)=>(0,h.jsx)(d.qr,{children:(0,h.jsx)(c.A,{text:(n+1).toString(),active:t===e.code||t===e,onClick:()=>r(e||e)})},n)))})]})}}}]);
//# sourceMappingURL=870.d3cfe3c6.chunk.js.map